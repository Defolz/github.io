$(document).ready(function(){const c="http://85.209.9.38:5000",n=$("#chat-list"),e=$("#messages");let o=null;function i(){n.find(".chat-item").each(function(){var t,a=$(this);a[0]===o?(e.empty(),a.addClass("chat-active"),t=a.attr("data-chat-id"),localStorage.setItem("chat_id",t)):a.removeClass("chat-active")})}function s(t){$.ajax({type:"GET",url:c+"/get_user_chats/"+t,success:function(t){var a=t.chats;const c=t.companion;console.log(a),console.log(c),n.empty(),a.forEach(function(t,a){var e=c,t=$("<div>").addClass("chat-item").attr("data-chat-id",t).text(e[a]).on("click",function(){o=this,i()});n.append(t)}),0<a.length&&(o=n.find(".chat-item:first")[0],i())}})}$("#create-chat-btn").click(function(){$("#create-chat-from").removeClass("none")}),$("#create-chat-from").submit(function(t){t.preventDefault();var a=localStorage.getItem("username"),e=$("#nickname-input").val();$.ajax({type:"POST",url:c+"/createChat",data:JSON.stringify({username:a,companion:e}),contentType:"application/json",success:function(t){alert(t.status),s(a),s(e)},error:function(t,a,e){alert("Ошибка: "+e)}})}),s(localStorage.getItem("username"))});