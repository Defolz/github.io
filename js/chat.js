$(document).ready(function(){const c="http://85.209.9.38:5000";$("#chat-list");const s=$("#messages"),o=$("#user-input");function l(e,t){t=$("<div>").addClass("message "+t).text(e);s.append(t),s.scrollTop(s[0].scrollHeight)}function e(){var e=localStorage.getItem("chat_id");e&&(e=e,$.ajax({type:"GET",url:c+"/get_chat_messages/"+e,contentType:"application/json",success:function(e){e=e.messages;s.empty(),e.forEach(function(e){var t=e[0],e=e[1];t===localStorage.getItem("username")?l(e,"user-message"):l(e,"interlocutor-message")})}}))}$("#send-button").click(function(){var t,s,e=localStorage.getItem("username"),a=localStorage.getItem("chat_id"),n=o.val();""!==$.trim(n)&&(t=e,e=a,s=n,$.ajax({type:"POST",url:c+"/send_message",contentType:"application/json",data:JSON.stringify({sender:t,chat_id:e,message:s}),success:function(e){"Message sent successfully"===e.status&&l(t,s)}}),o.val(""))}),e(),setInterval(e,100)});